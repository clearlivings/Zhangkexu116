<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Promise1</title>
  </head>
  <body>
    <script src="lib/jquery-3.2.1.js" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
    function create(url){
      return new Promise((resolve,reject)=>{
        $.ajax({
          url: url,
          dataType: 'json',
          success(data){
            resolve(data);
          },
          error(err){
            reject(err)
          }
        });
      });
    };
    Promise.all([create('data/data1.txt'),create('data/data2.txt')]).then(arr=>{
      let [res1,res2] = arr; // 解构赋值
      alert("success");
      console.log(res1);
      console.log(res2);
    },err=>{
      alert("fail");
    })
    </script>
  </body>
</html>
